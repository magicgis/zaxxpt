<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="recommendProd">
	<typeAlias alias="recommendProd" type="com.hnatourism.club.product.base.domain.RecommendProd" />
	<resultMap id="recommendProdResultMap" class="recommendProd">
		<result column="ID" property="id" />
		<result column="RECOMMEND_CITY_CODE" property="recommendCityCode" />
		<result column="PROD_TYPE" property="prodType" />
		<result column="SEQ" property="seq" />
		<result column="PRICE" property="price" />
		<result column="DISCOUNT" property="discount" />
		<result column="VERSION" property="version" />
		<result column="CONTENT" property="content" />
		<result column="PROD_SUB_TYPE" property="prodSubType" />
		<result column="PROD_CODE" property="prodCode" />
		<result column="PROD_NAME" property="prodName" />
		<result column="START_DATE" property="startDate" />
		<result column="STS" property="sts" />
		<result column="RMK" property="rmk" />
		<result column="CREATE_USER" property="createUser" />
		<result column="CREATE_TIME" property="createTime" />
		<result column="UPDATE_USER" property="updateUser" />
		<result column="UPDATE_TIME" property="updateTime" />
		<result column="TITLE" property="title" />
		<result column="CSS" property="css" />
		<result column="LOCATION" property="location" />
		<result column="SOURCE" property="source" />
	</resultMap>
	<sql id="selectRecommendProdSql">
		<![CDATA[
		SELECT T.ID,T.RECOMMEND_CITY_CODE,T.PROD_TYPE,T.SEQ,T.PRICE,T.DISCOUNT,T.VERSION,T.CONTENT,T.PROD_SUB_TYPE,T.PROD_CODE,T.PROD_NAME,T.START_DATE,T.STS,T.RMK,T.CREATE_USER,T.CREATE_TIME,T.UPDATE_USER,T.UPDATE_TIME,T.TITLE,T.CSS,T.LOCATION,T.SOURCE 
    	FROM RECOMMEND_PROD T
		]]>
	</sql>
	<select id="findRecommendProdByWhere" parameterClass="recommendProd" resultMap="recommendProdResultMap">
		<include refid="selectRecommendProdSql"/>	
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="recommendCityCode">
				T.RECOMMEND_CITY_CODE=#recommendCityCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="prodType">
				T.PROD_TYPE=#prodType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="seq">
				T.SEQ=#seq#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="price">
				T.PRICE=#price#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="discount">
				T.DISCOUNT=#discount#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="version">
				T.VERSION=#version#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="content">
				T.CONTENT=#content#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="prodSubType">
				T.PROD_SUB_TYPE=#prodSubType#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="prodCode">
				T.PROD_CODE=#prodCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="prodName">
				T.PROD_NAME=#prodName#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="startDate">
				T.START_DATE=#startDate#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sts">
				T.STS=#sts#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="rmk">
				T.RMK=#rmk#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="createUser">
				T.CREATE_USER=#createUser#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="createTime">
				T.CREATE_TIME=#createTime#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="updateUser">
				T.UPDATE_USER=#updateUser#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="updateTime">
				T.UPDATE_TIME=#updateTime#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="title">
				T.TITLE=#title#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="css">
				T.CSS=#css#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="location">
				T.LOCATION=#location#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="source">
				T.SOURCE=#source#
			</isNotEmpty>
		</dynamic>
	</select>
	<select id="findRecommendProdById" parameterClass="java.lang.String" resultMap="recommendProdResultMap">
		<include refid="selectRecommendProdSql"/>	
		<![CDATA[
			WHERE T.ID=#id#
		]]>
	</select>
	
	<sql id="selectAllRecommendFieldSql">
		<![CDATA[
		SELECT ID,RECOMMEND_CITY_CODE,PROD_TYPE,SEQ,PRICE,DISCOUNT,VERSION,CONTENT,PROD_SUB_TYPE,PROD_CODE,PROD_NAME,START_DATE,STS,RMK,CREATE_USER,CREATE_TIME,UPDATE_USER,UPDATE_TIME,TITLE,CSS,LOCATION,SOURCE
		]]>
	</sql>
	
   <!-- 根据类型查询推荐信息 -->
   <select id="findRecommendProdByType" parameterClass="java.util.Map" resultMap="recommendProdResultMap">
		<include refid="selectAllRecommendFieldSql"/>	
		<![CDATA[
		 FROM( SELECT PAGE.* ,ROWNUM FROM(
        ]]>
        <include refid="selectRecommendProdSql"/>	
        <![CDATA[     	
         WHERE T.PROD_TYPE=#type# AND T.STS=1 AND  T.RECOMMEND_CITY_CODE=#ctiyCode# ORDER BY T.SEQ ) PAGE WHERE ROWNUM <=#size#)
		]]>
	</select>
	
	<select id="findRecommendProdByTypeNoCode" parameterClass="java.util.Map" resultMap="recommendProdResultMap">
		<include refid="selectAllRecommendFieldSql"/>	
		<![CDATA[
		 FROM( SELECT PAGE.* ,ROWNUM FROM(
        ]]>
        <include refid="selectRecommendProdSql"/>	
        <![CDATA[     	
         WHERE T.PROD_TYPE=#type# AND STS=1 ORDER BY T.SEQ ) PAGE WHERE ROWNUM <=#size#)
		]]>
	</select>
	
<!--	<resultMap id="cityCodeResultMap" class="java.util.Map">-->
<!--		<result column="CITYCODE" property="cityCode" />-->
<!--	</resultMap>-->
<!--  <select id="findRCityCodeByType" parameterClass="java.util.Map" resultMap="cityCodeResultMap">-->
<!--		<![CDATA[-->
<!--         SELECT  PAGE.RECOMMEND_CITY_CODE CITYCODE FROM-->
<!--     	(SELECT  DISTINCT RECOMMEND_CITY_CODE FROM -->
<!--         (SELECT  RP.RECOMMEND_CITY_CODE,RP.STS FROM RECOMMEND_PROD RP INNER JOIN RECOMMEND_CITY RC ON RP.RECOMMEND_CITY_CODE=RC.CITY_CODE WHERE RC.STS=1 AND  RC.PROD_TYPE=#type# )JT WHERE JT.STS=1)PAGE WHERE ROWNUM<=#cityAmount#-->
<!--		]]>-->
<!--   </select>-->
<!--   		SELECT T.CITY_CODE,T.SEQ,T.CREATE_USER,T.CREATE_TIME,T.TYPE,T.UPDATE_TIME,T.UPDATE_USER,T.PROD_TYPE,T.AREA_CODE,T.STS-->
<!--		FROM RECOMMEND_CITY T-->
<!--	<insert id="insertRecommendProd" parameterClass="recommendProd">-->
<!--		INSERT INTO RECOMMEND_PROD-->
<!--		<dynamic prepend="(">-->
<!--			<isNotEmpty prepend="," property="id">-->
<!--				ID-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="recommendCityCode">-->
<!--				RECOMMEND_CITY_CODE-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="prodType">-->
<!--				PROD_TYPE-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="seq">-->
<!--				SEQ-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="price">-->
<!--				PRICE-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="discount">-->
<!--				DISCOUNT-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="version">-->
<!--				VERSION-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="content">-->
<!--				CONTENT-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="prodSubType">-->
<!--				PROD_SUB_TYPE-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="prodCode">-->
<!--				PROD_CODE-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="prodName">-->
<!--				PROD_NAME-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="startDate">-->
<!--				START_DATE-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="sts">-->
<!--				STS-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="rmk">-->
<!--				RMK-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="createUser">-->
<!--				CREATE_USER-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="createTime">-->
<!--				CREATE_TIME-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="updateUser">-->
<!--				UPDATE_USER-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="updateTime">-->
<!--				UPDATE_TIME-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="title">-->
<!--				TITLE-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="css">-->
<!--				CSS-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="location">-->
<!--				LOCATION-->
<!--			</isNotEmpty>-->
<!---->
<!--			<isNotEmpty prepend="," property="source">-->
<!--				SOURCE-->
<!--			</isNotEmpty>-->
<!---->
<!--		</dynamic>		-->
<!--		<dynamic prepend=") VALUES (">-->
<!---->
<!--			<isNotEmpty prepend="," property="id">-->
<!--				#id#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="recommendCityCode">-->
<!--				#recommendCityCode#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="prodType">-->
<!--				#prodType#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="seq">-->
<!--				#seq#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="price">-->
<!--				#price#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="discount">-->
<!--				#discount#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="version">-->
<!--				#version#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="content">-->
<!--				#content#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="prodSubType">-->
<!--				#prodSubType#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="prodCode">-->
<!--				#prodCode#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="prodName">-->
<!--				#prodName#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="startDate">-->
<!--				#startDate#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="sts">-->
<!--				#sts#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="rmk">-->
<!--				#rmk#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="createUser">-->
<!--				#createUser#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="createTime">-->
<!--				#createTime#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="updateUser">-->
<!--				#updateUser#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="updateTime">-->
<!--				#updateTime#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="title">-->
<!--				#title#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="css">-->
<!--				#css#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="location">-->
<!--				#location#-->
<!--			</isNotEmpty>-->
<!---->
<!---->
<!--			<isNotEmpty prepend="," property="source">-->
<!--				#source#-->
<!--			</isNotEmpty>-->
<!---->
<!--		 </dynamic>	)-->
<!--	</insert>-->
<!--	-->
<!--	<update id="updateRecommendProd" parameterClass="recommendProd">-->
<!--		UPDATE RECOMMEND_PROD-->
<!--        <dynamic prepend="set">-->
<!--		   <isNotEmpty prepend="," property="recommendCityCode">-->
<!--              RECOMMEND_CITY_CODE=#recommendCityCode#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="prodType">-->
<!--              PROD_TYPE=#prodType#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="seq">-->
<!--              SEQ=#seq#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="price">-->
<!--              PRICE=#price#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="discount">-->
<!--              DISCOUNT=#discount#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="version">-->
<!--              VERSION=#version#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="content">-->
<!--              CONTENT=#content#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="prodSubType">-->
<!--              PROD_SUB_TYPE=#prodSubType#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="prodCode">-->
<!--              PROD_CODE=#prodCode#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="prodName">-->
<!--              PROD_NAME=#prodName#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="startDate">-->
<!--              START_DATE=#startDate#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="sts">-->
<!--              STS=#sts#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="rmk">-->
<!--              RMK=#rmk#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="createUser">-->
<!--              CREATE_USER=#createUser#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="createTime">-->
<!--              CREATE_TIME=#createTime#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="updateUser">-->
<!--              UPDATE_USER=#updateUser#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="updateTime">-->
<!--              UPDATE_TIME=#updateTime#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="title">-->
<!--              TITLE=#title#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="css">-->
<!--              CSS=#css#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="location">-->
<!--              LOCATION=#location#-->
<!--           </isNotEmpty>-->
<!--		   <isNotEmpty prepend="," property="source">-->
<!--              SOURCE=#source#-->
<!--           </isNotEmpty>-->
<!--        </dynamic>-->
<!--		WHERE -->
<!--               ID=#id#-->
<!--	</update>	-->
<!--	<delete id="deleteRecommendProd" parameterClass="java.lang.String">-->
<!--		DELETE FROM RECOMMEND_PROD-->
<!--		WHERE -->
<!--               ID=#id#-->
<!--	</delete>	-->
</sqlMap>