<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="hnaProCity">
	<typeAlias alias="hnaProCityVo" type="com.hnatourism.club.golf.prod.vo.HnaProCityVo" />
	<resultMap id="api_hnaProCityResultMap" class="hnaProCityVo">
		<result column="PCCODE" property="pcCode" />
		<result column="PCNAME" property="pcName" />
		<result property="golflist"   column="PCCODE"  select="api_findGolfInfoByRecomProd" />
	</resultMap>
	<resultMap id="api_hnaProCityResultMap_Id" class="hnaProCityVo">
		<result column="PCCODE" property="pcCode" />
		<result column="PCNAME" property="pcName" />
	</resultMap>
	
	<parameterMap class="java.util.HashMap" id="parameterMap">   
      <parameter property="PCCODE"/>   
    </parameterMap> 
    
	<sql id="api_selectHnaProCitySql">
		<![CDATA[
			SELECT T.PCCODE,T.PCNAME 
			FROM HNA_PROCITY@b2c_link T
		]]>
	</sql>
	<!-- 高尔夫推荐省 -->
	<select id="api_findHnaProCity_comm" parameterClass="java.lang.String" resultMap="api_hnaProCityResultMap">
		<include refid="api_selectHnaProCitySql"/>	
		<![CDATA[
			WHERE T.PCCODE in (SELECT C.PROVINCE_CODE FROM (select r.PROVINCE_CODE from RECOMMEND_CITY r WHERE r.TYPE='0' and r.PROD_TYPE='GF' and r.STS=1 order by r.seq) C)
		]]>
	</select>
	
	<select id="api_findHnaProCityById" parameterClass="java.lang.String" resultMap="api_hnaProCityResultMap_Id">
		<include refid="api_selectHnaProCitySql"/>	
		<![CDATA[
			WHERE T.PCCODE =#city#
		]]>
	</select>
</sqlMap>