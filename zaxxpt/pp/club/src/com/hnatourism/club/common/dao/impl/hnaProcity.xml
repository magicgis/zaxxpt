<?xml version="1.0" encoding="GBK"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="hnaProcity">
	<typeAlias alias="hnaProcity" type="com.hnatourism.club.common.domain.HnaProcity" />
	<resultMap id="hnaProcityMap" class="hnaProcity">
		<result column="PCCODE" property="pccode" />
		<result column="PCNAME" property="pcname" />
		<result column="PARENTCODE" property="parentcode" />
		<result column="PARENTNAME" property="parentname" />
		<result column="AREA" property="area" />
		<result column="ISOPEN" property="isopen" />
		<result column="ISHOT" property="ishot" />
		<result column="SEARCHKEY" property="searchkey" />
		<result column="MAPBARKEY" property="mapbarkey" />
		<result column="WEATHERKEY" property="weatherkey" />
		<result column="RMK" property="rmk" />
		<result column="SHORTNAME" property="shortname" />
		<result column="PCTYPE" property="pctype" />
		<result column="LICENSE_PLATE" property="licensePlate" />
		<result column="AREA_CODE" property="areaCode" />
		<result column="ZIP_CODE" property="zipCode" />
		<result column="CODE" property="code" />
		<result column="DOMAIN_CODE" property="domainCode" />
		<result column="AIR_CODE" property="airCode" />
	</resultMap>
	
	<resultMap id="hnaProcityExportMap" class="hnaProcity">
		<result column="PCCODE" property="pccode" />
		<result column="PCNAME" property="pcname" />
		<result column="PARENTCODE" property="parentcode" />
		<result column="PARENTNAME" property="parentname" />
		<result column="AREA" property="area" />
	</resultMap>
	
	<sql id="selectHnaProcitySql">
		<![CDATA[
			SELECT T.PCCODE,T.PCNAME,T.PARENTCODE,T.PARENTNAME,T.AREA,T.ISOPEN,T.ISHOT,T.SEARCHKEY,
			T.MAPBARKEY,T.WEATHERKEY,T.RMK,T.SHORTNAME,T.PCTYPE,T.LICENSE_PLATE,T.AREA_CODE,T.ZIP_CODE,
			T.CODE,T.DOMAIN_CODE,T.AIR_CODE
			FROM HNA_PROCITY@b2c_link T
		]]>
	</sql>
	<select id="findAllSonCityByCode" parameterClass="java.lang.String" resultMap="hnaProcityMap">
		<include refid="selectHnaProcitySql"/>	
		<![CDATA[
			WHERE T.PARENTCODE=#parentcode:VARCHAR#
		]]>
	</select>
	<select id="findHnaProcityByCityCode" parameterClass="java.lang.String" resultMap="hnaProcityMap">
		<include refid="selectHnaProcitySql"/>	
		<![CDATA[
			ORDER BY T.ISHOT
		]]>
	</select>
	<select id="findAllOrderByShortname" parameterClass="java.lang.String" resultMap="hnaProcityMap">
		<include refid="selectHnaProcitySql"/>	
		<![CDATA[
			WHERE T.PCCODE=#pccode:VARCHAR#
		]]>
	</select>
	<select id="getAllCityByArea" parameterClass="java.lang.String" resultMap="hnaProcityMap">
		<include refid="selectHnaProcitySql"/>	
		<![CDATA[
			WHERE T.AREA=#area:VARCHAR#
		]]>
	</select>
	
	<select id="getAllProCity" parameterClass="java.lang.String" resultMap="hnaProcityExportMap">
		<![CDATA[
			select t.pccode,t.pcname,t.parentcode,t.parentname,t.area from hna_procity t
		]]>
	</select>
	
	<select id="getCodeByName" parameterClass="hnaProcity" resultMap="hnaProcityMap">
		<include refid="selectHnaProcitySql"/>	
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="CODE">
				T.pcname like '&#37;$pcname$&#37;'
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="provinceName">
				T.pctype like '&#37;$pctype$&#37;'
			</isNotEmpty>
		</dynamic>
	</select>
	
	
	<select id="findHnaProvinceOrCity" parameterClass="hnaProcity" resultMap="hnaProcityMap">
	   <include refid="selectHnaProcitySql"/>	
	   <dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="pcname">
				T.pcname like '&#37;$pcname$&#37;'
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="pctype">
				T.PCTYPE=#pctype#
			</isNotEmpty>
		</dynamic>
	</select>
	
	<select id="findHnaProcityByWhere" parameterClass="hnaProcity" resultMap="hnaProcityMap">
		<include refid="selectHnaProcitySql"/>	
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="pccode">
				T.PCCODE=#pccode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="pcname">
				T.PCNAME=#pcname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="parentcode">
				T.PARENTCODE=#parentcode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="parentname">
				T.PARENTNAME=#parentname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="area">
				T.AREA=#area#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="isopen">
				T.ISOPEN=#isopen#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="searchkey">
				T.SEARCHKEY=#searchkey#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="mapbarkey">
				T.MAPBARKEY=#mapbarkey#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="weatherkey">
				T.WEATHERKEY=#weatherkey#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="rmk">
				T.RMK=#rmk#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="shortname">
				T.SHORTNAME=#shortname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="pctype">
				T.PCTYPE=#pctype#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="licensePlate">
				T.LICENSE_PLATE=#licensePlate#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="areaCode">
				T.AREA_CODE=#areaCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="zipCode">
				T.ZIP_CODE=#zipCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="code">
				T.CODE=#code#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="domainCode">
				T.DOMAIN_CODE=#domainCode#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="airCode">
				T.AIR_CODE=#airCode#
			</isNotEmpty>
		</dynamic>
		<![CDATA[
		    and T.ISOPEN <> 0
			ORDER BY T.ISHOT DESC,PCNAME
		]]>
	</select>
	<select id="getAllCity" parameterClass="java.lang.String" resultMap="hnaProcityMap">
		<![CDATA[
			SELECT * FROM HNA_PROCITY 
		]]>
	</select>
	
	<select id="getCitiesByType" parameterClass="java.lang.String" resultMap="hnaProcityMap">
		<![CDATA[
			SELECT * FROM HNA_PROCITY WHERE PCTYPE=#pctype:VARCHAR# ORDER BY ISHOT DESC ,PCNAME 
		]]>
	</select>
	
	<select id="findHnaProcityById" parameterClass="java.lang.String" resultMap="hnaProcityMap">
		<include refid="selectHnaProcitySql"/>	
		<![CDATA[
			WHERE T.PCCODE=#pccode#
		]]>
	</select>
	<insert id="insertHnaProcity" parameterClass="hnaProcity">
		INSERT INTO HNA_PROCITY
		<dynamic prepend="(">
		     <isNotEmpty prepend="," property="pccode">
				PCCODE
			</isNotEmpty>
			<isNotEmpty prepend="," property="licensePlate">
				LICENSE_PLATE
			</isNotEmpty>

			<isNotEmpty prepend="," property="areaCode">
				AREA_CODE
			</isNotEmpty>

			<isNotEmpty prepend="," property="zipCode">
				ZIP_CODE
			</isNotEmpty>

			<isNotEmpty prepend="," property="code">
				CODE
			</isNotEmpty>

			<isNotEmpty prepend="," property="pccode">
				PCCODE
			</isNotEmpty>

			<isNotEmpty prepend="," property="pcname">
				PCNAME
			</isNotEmpty>

			<isNotEmpty prepend="," property="parentcode">
				PARENTCODE
			</isNotEmpty>

			<isNotEmpty prepend="," property="parentname">
				PARENTNAME
			</isNotEmpty>

			<isNotEmpty prepend="," property="area">
				AREA
			</isNotEmpty>

			<isNotEmpty prepend="," property="isopen">
				ISOPEN
			</isNotEmpty>

			<isNotEmpty prepend="," property="ishot">
				ISHOT
			</isNotEmpty>

			<isNotEmpty prepend="," property="searchkey">
				SEARCHKEY
			</isNotEmpty>

			<isNotEmpty prepend="," property="mapbarkey">
				MAPBARKEY
			</isNotEmpty>

			<isNotEmpty prepend="," property="weatherkey">
				WEATHERKEY
			</isNotEmpty>

			<isNotEmpty prepend="," property="rmk">
				RMK
			</isNotEmpty>

			<isNotEmpty prepend="," property="shortname">
				SHORTNAME
			</isNotEmpty>

			<isNotEmpty prepend="," property="pctype">
				PCTYPE
			</isNotEmpty>
			<isNotEmpty prepend="," property="licensePlate">
				LICENSE_PLATE
		   </isNotEmpty>
			<isNotEmpty prepend="," property="areaCode">
				AREA_CODE
			</isNotEmpty>
			<isNotEmpty prepend="," property="zipCode">
				ZIP_CODE
			</isNotEmpty>
			<isNotEmpty prepend="," property="code">
				CODE
			</isNotEmpty>
			<isNotEmpty prepend="," property="domainCode">
				DOMAIN_CODE
			</isNotEmpty>
			<isNotEmpty prepend="," property="airCode">
				AIR_CODE
			</isNotEmpty>
		</dynamic>		
		<dynamic prepend=") VALUES (">
			<isNotEmpty prepend="," property="pccode">
				#pccode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="licensePlate">
				#licensePlate#
			</isNotEmpty>


			<isNotEmpty prepend="," property="areaCode">
				#areaCode#
			</isNotEmpty>


			<isNotEmpty prepend="," property="zipCode">
				#zipCode#
			</isNotEmpty>


			<isNotEmpty prepend="," property="code">
				#code#
			</isNotEmpty>
			<isNotEmpty prepend="," property="pccode">
				#pccode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="pcname">
				#pcname#
			</isNotEmpty>
			<isNotEmpty prepend="," property="parentcode">
				#parentcode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="parentname">
				#parentname#
			</isNotEmpty>
			<isNotEmpty prepend="," property="area">
				#area#
			</isNotEmpty>
			<isNotEmpty prepend="," property="isopen">
				#isopen#
			</isNotEmpty>
			<isNotEmpty prepend="," property="ishot">
				#ishot#
			</isNotEmpty>
			<isNotEmpty prepend="," property="searchkey">
				#searchkey#
			</isNotEmpty>
			<isNotEmpty prepend="," property="mapbarkey">
				#mapbarkey#
			</isNotEmpty>
			<isNotEmpty prepend="," property="weatherkey">
				#weatherkey#
			</isNotEmpty>
			<isNotEmpty prepend="," property="rmk">
				#rmk#
			</isNotEmpty>
			<isNotEmpty prepend="," property="shortname">
				#shortname#
			</isNotEmpty>
			<isNotEmpty prepend="," property="pctype">
				#pctype#
			</isNotEmpty>
  			<isNotEmpty prepend="," property="licensePlate">
				#licensePlate#
		   </isNotEmpty>
			<isNotEmpty prepend="," property="areaCode">
				#areaCode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="zipCode">
				#zipCode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="code">
				#code#
			</isNotEmpty>
			<isNotEmpty prepend="," property="domainCode">
				#domainCode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="airCode">
				#airCode#
			</isNotEmpty>
		 </dynamic>	)
	</insert>
	
	<update id="updateHnaProcity" parameterClass="hnaProcity">
		UPDATE HNA_PROCITY
        <dynamic prepend="set">
		   <isNotEmpty prepend="," property="licensePlate">
              LICENSE_PLATE=#licensePlate#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="areaCode">
              AREA_CODE=#areaCode#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="zipCode">
              ZIP_CODE=#zipCode#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="code">
              CODE=#code#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="pccode">
              PCCODE=#pccode#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="pcname">
              PCNAME=#pcname#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="parentcode">
              PARENTCODE=#parentcode#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="parentname">
              PARENTNAME=#parentname#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="area">
              AREA=#area#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="isopen">
              ISOPEN=#isopen#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="ishot">
              ISHOT=#ishot#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="searchkey">
              SEARCHKEY=#searchkey#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="mapbarkey">
              MAPBARKEY=#mapbarkey#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="weatherkey">
              WEATHERKEY=#weatherkey#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="rmk">
              RMK=#rmk#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="shortname">
              SHORTNAME=#shortname#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="pctype">
              PCTYPE=#pctype#
           </isNotEmpty>
           <isNotEmpty prepend="," property="licensePlate">
				LICENSE_PLATE=#licensePlate#
		   </isNotEmpty>
			<isNotEmpty prepend="," property="areaCode">
				AREA_CODE=#areaCode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="zipCode">
				ZIP_CODE=#zipCode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="code">
				CODE=#code#
			</isNotEmpty>
			<isNotEmpty prepend="," property="domainCode">
				DOMAIN_CODE=#domainCode#
			</isNotEmpty>
			<isNotEmpty prepend="," property="airCode">
				AIR_CODE=#airCode#
			</isNotEmpty>
        </dynamic>
		WHERE PCCODE=#pccode#
	</update>	
	<delete id="deleteHnaProcity" parameterClass="java.lang.String">
		DELETE FROM HNA_PROCITY
		WHERE PCCODE=#pccode#
	</delete>
</sqlMap>