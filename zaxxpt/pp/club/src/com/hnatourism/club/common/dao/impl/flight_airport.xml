<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="flightAirport">
	<typeAlias alias="flightAirport" type="com.hnatourism.club.common.domain.FlightAirport" />
	<resultMap id="flightAirportResultMap" class="flightAirport">
		<result column="CREATE_USER" property="createUser" />
		<result column="ID" property="id" />
		<result column="CODE" property="code" />
		<result column="NAME" property="name" />
		<result column="AIRPORT_ENAME" property="airportEname" />
		<result column="STS" property="sts" />
        <result column="CITY" property="city" />
		<result column="UPDATE_TIME" property="updateTime" />
		<result column="UPDATE_USER" property="updateUser" />
		<result column="RMK" property="rmk" />
		<result column="CREATE_TIME" property="createTime" />
		<result column="IS_MAIN" property="isMain" />
		<result column="LNAME" property="lname" />
		<result column="ENAME" property="ename" />
	</resultMap>
	<sql id="selectFlightAirportSql">
		<![CDATA[
			SELECT T.CREATE_USER,T.ID,T.CODE,T.NAME,T.CITY,T.AIRPORT_ENAME,T.STS,T.UPDATE_TIME,T.UPDATE_USER,T.RMK,T.CREATE_TIME,T.IS_MAIN,T.LNAME,T.ENAME
			FROM FLIGHT_AIRPORT@B2C_LINK T
		]]>
	</sql>
	<select id="findMultiFlightAirportByWhere" parameterClass="flightAirport" resultMap="flightAirportResultMap">
	    <include refid="selectFlightAirportSql"/>  
        <![CDATA[
            GROUP BY T.CITY HAVING COUNT(T.CITY)>=2
        ]]>
    </select>
	<select id="findFlightAirportByWhere" parameterClass="flightAirport" resultMap="flightAirportResultMap">
		<include refid="selectFlightAirportSql"/>
		<dynamic prepend="WHERE">
			<![CDATA[
			T.STS <> '0'
		    ]]>	
			<isNotEmpty prepend="AND" property="createUser">
				T.CREATE_USER=#createUser#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="code">
				T.CODE=#code#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="name">
				T.NAME=#name#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="airportEname">
				T.AIRPORT_ENAME=#airportEname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="sts">
				T.STS=#sts#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="city">
                T.CITY=#city#
            </isNotEmpty>
			<isNotEmpty prepend="AND" property="updateTime">
				T.UPDATE_TIME=#updateTime#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="updateUser">
				T.UPDATE_USER=#updateUser#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="rmk">
				T.RMK=#rmk#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="createTime">
				T.CREATE_TIME=#createTime#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="isMain">
				T.IS_MAIN=#isMain#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="lname">
				T.LNAME=#lname#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="ename">
				T.ENAME=#ename#
			</isNotEmpty>
		</dynamic>
	</select>
	<select id="findFlightAirportById" parameterClass="java.lang.String" resultMap="flightAirportResultMap">
		<include refid="selectFlightAirportSql"/>	
		<![CDATA[
			WHERE T.ID=#id#
		]]>
	</select>
	<insert id="insertFlightAirport" parameterClass="flightAirport">
		INSERT INTO FLIGHT_AIRPORT@B2C_LINK
		<dynamic prepend="(">
			<isNotEmpty prepend="," property="createUser">
				CREATE_USER
			</isNotEmpty>

			<isNotEmpty prepend="," property="id">
				ID
			</isNotEmpty>

			<isNotEmpty prepend="," property="code">
				CODE
			</isNotEmpty>

			<isNotEmpty prepend="," property="name">
				NAME
			</isNotEmpty>

			<isNotEmpty prepend="," property="airportEname">
				AIRPORT_ENAME
			</isNotEmpty>

			<isNotEmpty prepend="," property="sts">
				STS
			</isNotEmpty>
            <isNotEmpty prepend="," property="city">
                CITY
            </isNotEmpty>
			<isNotEmpty prepend="," property="updateTime">
				UPDATE_TIME
			</isNotEmpty>

			<isNotEmpty prepend="," property="updateUser">
				UPDATE_USER
			</isNotEmpty>

			<isNotEmpty prepend="," property="rmk">
				RMK
			</isNotEmpty>

			<isNotEmpty prepend="," property="createTime">
				CREATE_TIME
			</isNotEmpty>
			
			<isNotEmpty prepend="," property="isMain">
				IS_MAIN
			</isNotEmpty>
			<isNotEmpty prepend="," property="lname">
				LNAME
			</isNotEmpty>
			
			<isNotEmpty prepend="," property="ename">
				ENAME
			</isNotEmpty>
		</dynamic>		
		<dynamic prepend=") VALUES (">

			<isNotEmpty prepend="," property="createUser">
				#createUser#
			</isNotEmpty>


			<isNotEmpty prepend="," property="id">
				#id#
			</isNotEmpty>


			<isNotEmpty prepend="," property="code">
				#code#
			</isNotEmpty>


			<isNotEmpty prepend="," property="name">
				#name#
			</isNotEmpty>


			<isNotEmpty prepend="," property="airportEname">
				#airportEname#
			</isNotEmpty>


			<isNotEmpty prepend="," property="sts">
				#sts#
			</isNotEmpty>
            <isNotEmpty prepend="," property="city">
                #city#
            </isNotEmpty>
			<isNotEmpty prepend="," property="updateTime">
				#updateTime#
			</isNotEmpty>


			<isNotEmpty prepend="," property="updateUser">
				#updateUser#
			</isNotEmpty>


			<isNotEmpty prepend="," property="rmk">
				#rmk#
			</isNotEmpty>


			<isNotEmpty prepend="," property="createTime">
				#createTime#
			</isNotEmpty>
			
			<isNotEmpty prepend="," property="isMain">
				#isMain#
			</isNotEmpty>
			<isNotEmpty prepend="," property="lname">
				#lname#
			</isNotEmpty>
			
			<isNotEmpty prepend="," property="ename">
				#ename#
			</isNotEmpty>
		 </dynamic>	)
	</insert>
	
	<update id="updateFlightAirport" parameterClass="flightAirport">
		UPDATE FLIGHT_AIRPORT@B2C_LINK
        <dynamic prepend="set">
		   <isNotEmpty prepend="," property="createUser">
              CREATE_USER=#createUser#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="code">
              CODE=#code#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="name">
              NAME=#name#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="airportEname">
              AIRPORT_ENAME=#airportEname#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="sts">
              STS=#sts#
           </isNotEmpty>
           <isNotEmpty prepend="," property="city">
              CITY=#city#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="updateTime">
              UPDATE_TIME=#updateTime#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="updateUser">
              UPDATE_USER=#updateUser#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="rmk">
              RMK=#rmk#
           </isNotEmpty>
		   <isNotEmpty prepend="," property="createTime">
              CREATE_TIME=#createTime#
           </isNotEmpty>
           <isNotEmpty prepend="," property="isMain">
              IS_MAIN=#isMain#
           </isNotEmpty>
           <isNotEmpty prepend="," property="lname">
              LNAME=#lname#
           </isNotEmpty>
           <isNotEmpty prepend="," property="ename">
              ENAME=#ename#
           </isNotEmpty>
        </dynamic>
		WHERE 
               ID=#id#
	</update>	
	<delete id="deleteFlightAirport" parameterClass="java.lang.String">
		DELETE FROM FLIGHT_AIRPORT@B2C_LINK
		WHERE 
               ID=#id#
	</delete>	
	<select id="findFlightAirportByCode" parameterClass="java.lang.String" resultMap="flightAirportResultMap">
		<include refid="selectFlightAirportSql"/>	
		<![CDATA[
			WHERE T.CODE=#code# AND T.STS=1
		]]>
	</select>
	
	
</sqlMap>